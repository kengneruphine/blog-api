(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,a){e.exports=a(61)},38:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),o=a.n(r),c=(a(38),a(2)),s=a(3),i=a(5),u=a(4),m=a(6),h=a(13),p=a(8),d=a.n(p),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.submitHandler=function(e){e.preventDefault(),console.log(a.state),d.a.post("http://localhost:4000/api/user/login",a.state).then((function(e){localStorage.setItem("loginToken",JSON.stringify({token:e.data})),a.props.history.push("/Post"),a.setState(a.state)})).catch((function(e){alert(e)}))},a.state={username:"",password:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return l.a.createElement("form",{onSubmit:this.submitHandler,style:{width:"50%",marginLeft:"15%",marginTop:"7%"}},l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.changeHandler}),l.a.createElement("button",{value:"submit"},"Login"))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.submitHandler=function(e){e.preventDefault(),console.log(a.state),d.a.post("http://localhost:4000/api/user/register",a.state).then((function(e){a.props.history.push("/Login"),a.setState(a.state)})).catch((function(e){alert(e)}))},a.state={username:"",email:"",password:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password;return l.a.createElement("div",{style:{width:"50%",marginLeft:"15%",marginTop:"5%"}},l.a.createElement("h3",null,"Create an account"),l.a.createElement("form",{onSubmit:this.submitHandler},l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"text",name:"email",value:a,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.changeHandler}),l.a.createElement("button",{value:"submit"},"Register")))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleCheckClick=function(){a.setState({publish:!a.state.publish})},a.submitHandler=function(e){e.preventDefault();var t=a.state.store.token;console.log("token is",t),d.a.post("http://localhost:4000/api/posts",a.state,{headers:{"Content-Type":"application/json","auth-token":"".concat(t)}}).then((function(e){a.setState(a.initialState)})).catch((function(e){alert(e)}))},a.initialState={title:"",content:"",publish:!1,store:""},a.state=a.initialState,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.storeCollector()}},{key:"storeCollector",value:function(){var e=JSON.parse(localStorage.getItem("loginToken"));e&&this.setState({store:e})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.content,n=e.publish;return l.a.createElement("div",{style:{width:"50%",marginLeft:"15%",marginTop:"2%"}},l.a.createElement("h5",null,"Submit a Post"),l.a.createElement("form",{onSubmit:this.submitHandler},l.a.createElement("label",{htmlFor:"username"},"Title"),l.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"content"},"Content"),l.a.createElement("textarea",{name:"content",value:a,onChange:this.changeHandler}),l.a.createElement("input",{type:"checkbox",value:n,onChange:this.handleCheckClick,className:"filled-in",id:"filled-in-box"})," \u2003Publish",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{value:"submit"},"Submit")))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.state={posts:[],errorMsg:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getAllPost",value:function(){var e=this;d.a.get("http://localhost:4000/api/posts").then((function(t){e.setState({posts:t.data})})).catch((function(t){console.log(t),e.setState({errorMsg:"Error retrieving data"})}))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.interval=setInterval((function(){return e.getAllPost()}),1e3)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.posts;e.errorMsg;return l.a.createElement("div",null,l.a.createElement("h3",null,"List of Posts "),l.a.createElement("div",null,t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("h5",null,"Title :",e.title," \u2003  Date:",new Date(e.createdAt).toLocaleDateString(),"\u2003\u2003 ",l.a.createElement("button",null,"Edit")),l.a.createElement("br",null),l.a.createElement("p",null,e.content))}))))}}]),t}(n.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"post"},l.a.createElement(E,null),l.a.createElement("br",null),l.a.createElement(f,null))}}]),t}(n.Component),O=a(12),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.post=a.props.location.state,a.postId=a.post._id,a.submitHandler=function(e){e.preventDefault(),d.a.post("http://localhost:4000/api/comments/".concat(a.postId),a.state).then((function(e){console.log("response is",e),a.setState(a.initialState)})).catch((function(e){alert(e)}))},a.initialState={name:"",email:"",message:""},a.state=a.initialState,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.message;return l.a.createElement("div",null,l.a.createElement("h5",null,this.post.title," \u2003 ",l.a.createElement(O.b,{to:"/Readers"}," back ")),l.a.createElement("p",null,"Published date ",new Date(this.post.createdAt).toLocaleDateString()),l.a.createElement("p",null,this.post.content),l.a.createElement("h5",null,"Comments"),this.post.comments.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("h6",null,"Name :",e.name," \u2003  Date:",new Date(e.createdAt).toLocaleDateString()),l.a.createElement("p",null,e.message))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"createComment",style:{width:"50%",marginLeft:"15%",marginTop:"2%"}},l.a.createElement("h5",null,"Leave a comment"),l.a.createElement("form",{onSubmit:this.submitHandler},l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"text",name:"email",value:a,onChange:this.changeHandler}),l.a.createElement("label",{htmlFor:"message"},"Message"),l.a.createElement("textarea",{name:"message",value:n,onChange:this.changeHandler}),l.a.createElement("button",{value:"submit"},"Submit"))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.state={posts:[],singlePost:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.get("http://localhost:4000/api/posts").then((function(t){console.log(t),e.setState({posts:t.data})})).catch((function(t){console.log(t),e.setState({errorMsg:"Error retrieving data"})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getPost",value:function(e){var t=this;console.log(e),d.a.get("http://localhost:4000/api/posts/".concat(e)).then((function(e){console.log(e.data),t.setState({singlePost:e.data}),t.props.history.push("/single-post",t.state.singlePost)})).catch((function(e){console.log(e),t.setState({errorMsg:"Error retrieving data"})}))}},{key:"render",value:function(){var e=this,t=this.state.posts;return l.a.createElement("div",null,l.a.createElement("h4",null,"List of all Posts available on this site"),l.a.createElement("div",null,t.map((function(t,a){return l.a.createElement("div",{key:a,"data-id":t.id},l.a.createElement("h5",{onClick:function(){return e.getPost(t._id)}},"Title :",l.a.createElement(O.b,null,t.title," ")," \u2003  Date:",new Date(t.createdAt).toLocaleDateString()),l.a.createElement("br",null),l.a.createElement("p",null,t.content))}))))}}]),t}(n.Component),S=a(14),k=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(O.a,null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"list"},l.a.createElement("ul",{style:{listStyleType:"none",display:"flex",backgroundColor:"lightblue",marginTop:10}},l.a.createElement("li",null," ",l.a.createElement(O.b,{to:"/Login"},"Login"))," \u2003\u2003",l.a.createElement("li",null,l.a.createElement(O.b,{to:"/Register"},"Register")),"  \u2003\u2003",l.a.createElement("li",null,l.a.createElement(O.b,{to:"/Readers"},"Readers"))),l.a.createElement("h2",null,"Welcome to Simple blog site")),l.a.createElement("br",null),l.a.createElement(S.c,null,l.a.createElement(S.a,{exact:!0,path:"/",component:b}),l.a.createElement(S.a,{path:"/Login",component:b}),l.a.createElement(S.a,{path:"/Register",component:g}),l.a.createElement(S.a,{path:"/Readers",component:y})),l.a.createElement(S.c,null,l.a.createElement(S.a,{path:"/Post",component:v}),l.a.createElement(S.a,{path:"/single-post",component:j}))))}}]),t}(n.Component);o.a.render(l.a.createElement(k,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.7cfef9a2.chunk.js.map